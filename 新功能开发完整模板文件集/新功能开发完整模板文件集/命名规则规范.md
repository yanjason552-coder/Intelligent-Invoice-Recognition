# 项目命名规则规范

## 1. 数据库命名规则

### 1.1 表名命名
- **规则**：使用下划线命名法（snake_case）
- **格式**：`{业务模块}_{实体名}`
- **示例**：
  - `material` - 物料表
  - `material_class` - 物料分类表
  - `material_density` - 物料密度表
  - `sales_order` - 销售订单表
  - `sales_order_doc_d` - 销售订单明细表
  - `nesting_layout` - 搭切布局表
  - `surface_technology` - 表面工艺表

### 1.2 字段命名
- **主键**：统一使用`id`（UUID类型）
- **外键**：`{关联表名}_id`
- **时间字段**：
  - `created_at` - 创建时间
  - `updated_at` - 更新时间
  - `approve_date` - 审批时间
  - `modify_date_last` - 最后修改时间
- **状态字段**：
  - `approve_status` - 审批状态（N/Y/U/V）
  - `is_active` - 是否启用（boolean）
- **用户字段**：
  - `creator` - 创建人
  - `modifier_last` - 最后修改人
  - `approver` - 审批人
- **业务字段**：使用驼峰转下划线
  - `material_code` - 物料代码
  - `material_desc` - 物料描述
  - `feature_code` - 特征代码
  - `feature_value` - 特征值

### 1.3 索引命名
- **主键索引**：自动生成
- **唯一索引**：`idx_{表名}_{字段名}`
- **普通索引**：`idx_{表名}_{字段名}`
- **复合索引**：`idx_{表名}_{字段1}_{字段2}`

### 1.4 约束命名
- **主键约束**：`pk_{表名}`
- **外键约束**：`fk_{表名}_{关联表名}`
- **唯一约束**：`uk_{表名}_{字段名}`
- **检查约束**：`ck_{表名}_{字段名}`

## 2. 后端命名规则

### 2.1 文件名命名
- **模型文件**：`models_{业务模块}.py`
  - `models_material.py`
  - `models_sales_order.py`
  - `models_nesting_layout.py`
- **路由文件**：`{业务模块}.py`
  - `material.py`
  - `sales_order.py`
  - `nesting_layout.py`
- **工具文件**：`utils_{功能}.py`
  - `utils_feature.py`
  - `utils.py`
- **测试文件**：`test_{功能}.py`
  - `test_material_api.py`
  - `test_sales_order.py`

### 2.2 类名命名
- **基础模型**：`{实体名}Base`
- **创建模型**：`{实体名}Create`
- **更新模型**：`{实体名}Update`
- **数据库模型**：`{实体名}`
- **公共模型**：`{实体名}Public`
- **示例**：
  ```python
  class MaterialBase(SQLModel):
  class MaterialCreate(MaterialBase):
  class MaterialUpdate(SQLModel):
  class Material(MaterialBase, table=True):
  class MaterialPublic(MaterialBase):
  ```

### 2.3 函数命名
- **API函数**：使用动词+名词
  - `get_materials` - 获取物料列表
  - `create_material` - 创建物料
  - `update_material` - 更新物料
  - `delete_material` - 删除物料
- **工具函数**：使用动词+名词
  - `generate_guid` - 生成GUID
  - `validate_material_code` - 验证物料代码
- **私有函数**：使用下划线前缀
  - `_validate_data` - 验证数据
  - `_format_response` - 格式化响应

### 2.4 变量命名
- **数据库会话**：`db`
- **当前用户**：`current_user`
- **查询参数**：使用描述性名称
  - `skip` - 跳过记录数
  - `limit` - 限制记录数
  - `material_id` - 物料ID
- **常量**：使用大写字母和下划线
  - `MAX_PAGE_SIZE` - 最大页面大小
  - `DEFAULT_SORT_FIELD` - 默认排序字段

## 3. 前端命名规则

### 3.1 文件名命名
- **页面文件**：`{业务模块}.tsx`
  - `material.tsx`
  - `sales-order.tsx`
  - `nesting-layout.tsx`
- **组件文件**：`{组件名}.tsx`
  - `MaterialEdit.tsx`
  - `MaterialClassEdit.tsx`
  - `SalesOrderList.tsx`
- **API文件**：`{业务模块}Api.ts`
  - `materialApi.ts`
  - `salesOrderApi.ts`
  - `nestingLayoutApi.ts`
- **类型文件**：`{业务模块}Types.ts`
  - `materialTypes.ts`
  - `salesOrderTypes.ts`

### 3.2 接口命名
- **数据接口**：使用PascalCase
  - `Material`
  - `MaterialClass`
  - `SalesOrder`
- **创建接口**：`{实体名}Create`
- **更新接口**：`{实体名}Update`
- **API对象**：`{业务模块}Api`
- **响应接口**：`{实体名}Response`

### 3.3 组件命名
- **页面组件**：`{业务模块}Page`
  - `MaterialPage`
  - `SalesOrderPage`
- **编辑组件**：`{实体名}Edit`
  - `MaterialEdit`
  - `MaterialClassEdit`
- **列表组件**：`{实体名}List`
  - `MaterialList`
  - `SalesOrderList`
- **表单组件**：`{实体名}Form`
  - `MaterialForm`
  - `SalesOrderForm`

### 3.4 变量命名
- **状态变量**：使用camelCase
  - `materialData` - 物料数据
  - `selectedRows` - 选中的行
  - `isLoading` - 加载状态
- **函数变量**：使用动词+名词
  - `loadMaterials` - 加载物料
  - `handleEdit` - 处理编辑
  - `handleDelete` - 处理删除
- **常量**：使用大写字母和下划线
  - `API_BASE_URL` - API基础URL
  - `DEFAULT_PAGE_SIZE` - 默认页面大小

### 3.5 Hook命名
- **自定义Hook**：使用`use`前缀
  - `useMaterials` - 使用物料数据
  - `useMaterialForm` - 使用物料表单
  - `useApiCall` - 使用API调用

## 4. API路径命名规则

### 4.1 路径格式
- **规则**：使用连字符命名法（kebab-case）
- **格式**：`/api/v1/{业务模块}`
- **示例**：
  - `/api/v1/materials` - 物料管理
  - `/api/v1/material-classes` - 物料分类
  - `/api/v1/sales-orders` - 销售订单
  - `/api/v1/nesting-layouts` - 搭切布局

### 4.2 操作路径
- **列表**：`GET /api/v1/{业务模块}`
- **详情**：`GET /api/v1/{业务模块}/{id}`
- **创建**：`POST /api/v1/{业务模块}`
- **更新**：`PUT /api/v1/{业务模块}/{id}`
- **删除**：`DELETE /api/v1/{业务模块}/{id}`
- **批量操作**：`POST /api/v1/{业务模块}/batch-{操作}`

### 4.3 查询参数
- **分页参数**：
  - `skip` - 跳过记录数
  - `limit` - 限制记录数
- **过滤参数**：
  - `is_active` - 是否启用
  - `status` - 状态
- **搜索参数**：
  - `search` - 搜索关键词
  - `keyword` - 关键词
- **排序参数**：
  - `sort_by` - 排序字段
  - `sort_order` - 排序方向（asc/desc）

## 5. 配置文件命名规则

### 5.1 环境配置文件
- `.env` - 环境变量
- `.env.local` - 本地环境变量
- `.env.development` - 开发环境变量
- `.env.production` - 生产环境变量

### 5.2 项目配置文件
- `package.json` - Node.js项目配置
- `pyproject.toml` - Python项目配置
- `docker-compose.yml` - Docker编排配置
- `nginx.conf` - Nginx配置

## 6. 文档命名规则

### 6.1 技术文档
- `README.md` - 项目说明
- `API.md` - API文档
- `DEPLOYMENT.md` - 部署文档
- `DEVELOPMENT.md` - 开发文档

### 6.2 业务文档
- `需求分析_{业务模块}.md` - 需求分析文档
- `数据库设计_{业务模块}.md` - 数据库设计文档
- `API设计_{业务模块}.md` - API设计文档

## 7. 命名规范总结

### 7.1 基本原则
- **一致性**：相同类型的命名保持一致的风格
- **可读性**：命名要清晰易懂，表达准确的含义
- **简洁性**：避免过长或过于复杂的命名
- **规范性**：遵循行业和项目的命名约定

### 7.2 命名风格对照表
| 类型 | 风格 | 示例 |
|------|------|------|
| 数据库表名 | snake_case | `material_class` |
| 数据库字段名 | snake_case | `material_code` |
| Python类名 | PascalCase | `MaterialClass` |
| Python函数名 | snake_case | `get_material_list` |
| Python变量名 | snake_case | `material_data` |
| TypeScript接口名 | PascalCase | `MaterialClass` |
| TypeScript变量名 | camelCase | `materialData` |
| React组件名 | PascalCase | `MaterialList` |
| API路径 | kebab-case | `/api/v1/material-classes` |
| 文件名 | camelCase | `materialApi.ts` |

### 7.3 常见命名模式
- **CRUD操作**：`create_*`, `read_*`, `update_*`, `delete_*`
- **状态管理**：`is_*`, `has_*`, `can_*`
- **事件处理**：`handle_*`, `on_*`
- **数据获取**：`get_*`, `fetch_*`, `load_*`
- **数据验证**：`validate_*`, `check_*`
- **工具函数**：`format_*`, `parse_*`, `convert_*`
