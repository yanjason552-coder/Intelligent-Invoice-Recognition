# 销售订单查询功能说明

## 功能概述

销售订单查询功能允许用户通过多种条件筛选销售订单数据，支持条件查询和全量查询两种模式。

## 查询条件

查询对话框提供以下查询条件：

- **客户全称**: 按客户名称筛选
- **订单单号**: 按订单编号筛选
- **订单日期**: 按订单日期筛选
- **物料编码**: 按物料编码筛选
- **物料描述**: 按物料描述筛选
- **物料规格**: 按物料规格筛选

## 查询模式

### 1. 条件查询
当用户输入一个或多个查询条件时，系统会根据条件筛选数据：
- 支持多条件组合查询
- 条件之间为"与"关系
- 空值条件会被自动忽略

### 2. 全量查询
当用户不输入任何查询条件时，系统会返回数据库中的所有数据：
- 点击查询按钮时，即使所有条件为空也会执行查询
- 返回所有符合条件的记录
- 适用于需要查看全部数据的场景

## 使用方法

1. 点击工具栏中的"查询"按钮（🔍图标）
2. 在弹出的查询对话框中：
   - 输入需要的查询条件
   - 或者保持所有条件为空
3. 点击"查询"按钮执行查询
4. 系统会：
   - 清空当前表格数据
   - 显示加载状态
   - 执行查询并显示结果

## 操作按钮

- **查询**: 执行查询操作
- **重置**: 清空所有查询条件
- **取消**: 关闭查询对话框

## 查询结果

- **有数据**: 显示查询到的记录
- **无数据**: 显示"没有找到匹配的数据"（条件查询）或"暂无数据"（全量查询）
- **加载中**: 显示"正在加载数据..."

## 技术实现

### 前端逻辑
- 查询条件为空时不传递`filters`参数
- 有查询条件时传递`filters`对象
- 动态构建API请求体

### 后端处理
- 检查`request.filters`是否存在
- 存在时应用过滤条件
- 不存在时查询所有数据

## 测试

可以使用以下测试脚本验证功能：

```javascript
// 在浏览器控制台运行
// 测试空查询条件
fetch('/api/v1/salesOrderDocD/unified', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${localStorage.getItem('access_token')}`
  },
  body: JSON.stringify({
    action: 'list',
    module: 'sales_order_doc_d',
    page: 1,
    limit: 20,
    timestamp: new Date().toISOString()
  })
})
```

## 注意事项

1. 查询操作会清空当前表格数据
2. 查询结果会替换当前显示的数据
3. 支持分页查询（默认每页20条）
4. 查询条件支持模糊匹配（后端实现）
5. 空查询条件不会报错，会返回所有数据 